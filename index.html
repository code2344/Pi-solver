<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pi Approximation</title>
    <style>
        body {
            background-color: black;
            color: white;
            font-family: monospace;
            padding: 10px;
        }
        .correct { color: lime; }
        .incorrect { color: red; }
        #output {
            white-space: pre-line;
            max-height: 400px;
            overflow-y: auto;
            border: 1px solid white;
            padding: 10px;
        }
        .entry {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }
        .entry .count {
            text-align: right;
            width: 50px; /* Adjust this width as needed */
        }
    </style>
</head>
<body>
    <h2>Pi Approximation</h2>
    <div id="output"></div>
    <script>
        let bestNumerator = 22;
        let bestDenominator = 7;
        let bestError = Math.abs((bestNumerator / bestDenominator) - Math.PI);
        let outputDiv = document.getElementById("output");
        let results = [];
        let denominator = 1;
        let count = 0; // Start count at 0 or 1 depending on your preference

        function findBetterPiApproximation() {
            count++;  // Increment the global count for each iteration

            let numerator = Math.round(denominator * Math.PI);
            let approx = numerator / denominator;
            let error = Math.abs(approx - Math.PI);

            let entry = `<div class="entry">
                            <span>${numerator}/${denominator} = ${approx} (Error: ${error})</span>
                            <span class='count'>(${count})</span>
                          </div>`;
            
            // Determine if the current approximation is better
            if (error < bestError) {
                bestNumerator = numerator;
                bestDenominator = denominator;
                bestError = error;
                results.unshift(`<span class='correct'>✔ ${entry}</span>`);
            } else {
                results.push(`<span class='incorrect'>✘ ${entry}</span>`);
            }
            
            // Update the output
            outputDiv.innerHTML = results.join("<br>");
            outputDiv.scrollTop = outputDiv.scrollHeight;
            
            denominator++;  // Increment denominator for next approximation
            setTimeout(findBetterPiApproximation, 0);  // Continue next approximation
        }
        
        findBetterPiApproximation();
    </script>
    <script>
    const canWakeLock = () => 'wakeLock' in navigator;
    let wakelock;
    
    async function lockWakeState() {
        if(!canWakeLock()) return;
        try {
            wakelock = await navigator.wakeLock.request();
            wakelock.addEventListener('release', () => {
                console.log('Screen Wake State Locked:', !wakelock.released);
            });
            console.log('Screen Wake State Locked:', !wakelock.released);
        } catch(e) {
            console.error('Failed to lock wake state with reason:', e.message);
        }
    }
    
    // Wrap the call to lockWakeState inside an async function
    (async function() {
        await lockWakeState();
    })();
    </script>
    <div class="container">
      <div class="vertical-center">
        <label class="switch">
          <input type="checkbox" id="toggle">
          <span class="slider round"></span>
        </label>
      
        <h1 id="title">Keep Screen On</h1>
        <p id="description">Turn on the toggle above and prevent your device from sleeping.</p>
        <script src="NoSleep.min.js"></script>      
      </div>
    </div>
</body>
</html>
